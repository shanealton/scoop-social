<script>
  function onFileChange(event) {
    console.log(event)

    const file = event.target.files[0]
    console.log(file)

    const imageSrc =  window.URL.createObjectURL(file)

    document.getElementById('selectedImage').src = imageSrc
  }
</script>

<div class="post-form">
  <form action="/post" method="POST" enctype="multipart/form-data">
    <input type="text" name="postBody" placeholder="Say something...">
    <button type="submit">Create Post</button>

    <div class="file-selector">
      <input name="imagefile" onchange="onFileChange(event)" type="file"/>
      <img id="selectedImage" src="" />
    </div>
  </form>
</div>

<div class="post-all">
  <% allPosts.forEach(p => { %>
    <div class="post">
      <div class="username">
        <%= p.user.fullName %>
      </div>

      <div class="timestamp">
        <%= new Date(p.createdAt).toLocaleTimeString()
        + " " + new Date(p.createdAt).toLocaleDateString() %>
      </div>

      <div class="post-body">
        <%= p.text %>
        <img class="post-img" src="<%= p.imageUrl %>" /> 
      </div>

    </div>
  <% }) %>
</div>
